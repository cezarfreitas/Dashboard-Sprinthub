@tailwind base;
@tailwind components;
@tailwind utilities;

/* Ocultar scrollbar horizontal */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* Scrollbar sempre visível */
.scrollbar-gutter-stable {
  scrollbar-gutter: stable;
}
.scrollbar-gutter-stable::-webkit-scrollbar {
  height: 12px;
  width: 12px;
}
.scrollbar-gutter-stable::-webkit-scrollbar-track {
  background: hsl(var(--muted));
  border-radius: 6px;
}
.scrollbar-gutter-stable::-webkit-scrollbar-thumb {
  background: hsl(var(--muted-foreground) / 0.3);
  border-radius: 6px;
  border: 2px solid hsl(var(--muted));
}
.scrollbar-gutter-stable::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--muted-foreground) / 0.5);
}

/* Variáveis de fonte */
:root {
  --font-poppins: 'Poppins', system-ui, -apple-system, sans-serif;
  --font-mono: 'JetBrains Mono', 'Fira Code', Consolas, monospace;
  --font-inter: 'Inter', system-ui, -apple-system, sans-serif;
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 207 56% 50%;
    --primary-foreground: 0 0% 100%;
    --secondary: 210 40% 96%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 207 56% 50%;
    --sidebar: 0 0% 98%;
    --sidebar-foreground: 222.2 84% 4.9%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 0 0% 0%;
    --foreground: 0 0% 98%;
    --card: 0 0% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 0 0% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 207 56% 50%;
    --primary-foreground: 0 0% 100%;
    --secondary: 0 0% 9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 0 0% 9%;
    --muted-foreground: 0 0% 63.9%;
    --accent: 0 0% 9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 14.9%;
    --input: 0 0% 14.9%;
    --ring: 207 56% 50%;
    --sidebar: 0 0% 3.9%;
    --sidebar-foreground: 0 0% 98%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

@layer utilities {
  @keyframes heartbeat {
    0% {
      transform: scale(1);
    }
    14% {
      transform: scale(1.1);
    }
    28% {
      transform: scale(1);
    }
    42% {
      transform: scale(1.1);
    }
    70% {
      transform: scale(1);
    }
  }

  @keyframes slide-down {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Animação moderna para nova notificação entrando com bounce */
  @keyframes notification-pop {
    0% {
      opacity: 0;
      transform: translateY(-50px) scale(0.8);
    }
    60% {
      opacity: 1;
      transform: translateY(5px) scale(1.05);
    }
    80% {
      transform: translateY(-2px) scale(1.02);
    }
    100% {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  /* Animação suave de entrada para cards de unidade */
  @keyframes card-appear {
    0% {
      opacity: 0;
      transform: translateY(30px) scale(0.9);
    }
    100% {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }


  .animate-notification-pop {
    animation: notification-pop 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  .animate-slide-down {
    animation: notification-pop 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  .animate-card-appear {
    animation: card-appear 0.5s cubic-bezier(0.16, 1, 0.3, 1);
  }

  /* Card de notificação com transição suave e hover */
  .notification-card {
    transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    transform-origin: center center;
  }

  .notification-card:hover {
    transform: translateX(4px) scale(1.02);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  }
  
  /* Container de notificações - espaçamento consistente */
  .notifications-container {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  /* Animação de hover para cards de unidade */
  .unidade-card {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    will-change: transform;
  }

  .unidade-card:hover {
    transform: translateY(-8px) scale(1.03);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
  }

  .unidade-card:active {
    transform: translateY(-4px) scale(1.01);
  }

  /* Header padrão de Card baseado na cor principal (vinda do banco via --primary) */
  .card-header-brand {
    @apply bg-gradient-to-r from-primary to-primary/90 px-4 py-2.5;
  }

  .card-header-brand-title {
    @apply text-sm font-bold tracking-wide leading-tight text-primary-foreground;
  }

  .card-header-brand-subtitle {
    @apply text-[11px] font-medium leading-tight text-primary-foreground/80;
  }

  .card-header-brand-icon {
    @apply h-4 w-4 shrink-0 text-primary-foreground;
  }

  .card-header-muted {
    @apply bg-gradient-to-r from-gray-400 to-gray-500 px-4 py-2.5;
  }
}

/* Tipografia moderna */
@layer base {
  html {
    font-feature-settings: "cv02", "cv03", "cv04", "cv11";
    font-variation-settings: normal;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    font-family: var(--font-poppins);
    line-height: 1.6;
    letter-spacing: -0.011em;
  }

  /* Headings com tipografia moderna */
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-poppins);
    font-weight: 600;
    line-height: 1.2;
    letter-spacing: -0.025em;
    color: hsl(var(--foreground));
  }

  h1 {
    font-size: 2.5rem;
    font-weight: 700;
    letter-spacing: -0.04em;
  }

  h2 {
    font-size: 2rem;
    font-weight: 600;
    letter-spacing: -0.03em;
  }

  h3 {
    font-size: 1.5rem;
    font-weight: 600;
    letter-spacing: -0.02em;
  }

  h4 {
    font-size: 1.25rem;
    font-weight: 500;
  }

  /* Texto do corpo */
  p {
    line-height: 1.7;
    color: hsl(var(--muted-foreground));
  }

  /* Links modernos */
  a {
    color: hsl(var(--primary));
    text-decoration: none;
    font-weight: 500;
    transition: color 0.2s ease;
  }

  a:hover {
    color: hsl(var(--primary) / 0.8);
  }

  /* Código */
  code, pre {
    font-family: var(--font-mono);
    font-feature-settings: "liga" 0;
  }

  /* Melhor contraste para texto pequeno */
  .text-xs, .text-sm {
    font-weight: 500;
    letter-spacing: 0.01em;
  }

  /* Classes utilitárias para tipografia */
  .font-display {
    font-family: var(--font-poppins);
    font-weight: 700;
    letter-spacing: -0.04em;
    line-height: 1.1;
  }

  .font-body {
    font-family: var(--font-poppins);
    font-weight: 400;
    line-height: 1.7;
  }

  .font-mono {
    font-family: var(--font-mono);
  }

  /* Suavização para textos em fundos escuros */
  .dark {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}

/* ===== OTIMIZAÇÕES PARA CARDS DE UNIDADES (4 POR LINHA) ===== */

/* Otimizações para cards de unidades - Abertas/Ganhas/Perdidas */
.unidade-card button[title*="oportunidades"] {
  max-width: 100%;
  overflow: hidden;
  min-width: 0;
}

.unidade-card button[title*="oportunidades"] span {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
  display: block;
}

/* Container das métricas */
.unidade-card .flex.items-center.justify-between {
  min-width: 0;
  width: 100%;
  overflow: hidden;
}

.unidade-card .flex.items-center.justify-between > button {
  min-width: 0;
  flex: 1 1 0%;
  overflow: hidden;
}

/* Grid de 4 colunas - ajustes específicos para lg breakpoint (1024px-1536px) */
@media (min-width: 1024px) and (max-width: 1536px) {
  
  /* ===== CARDS DE UNIDADES (4 POR LINHA) ===== */
  .lg\:grid-cols-4 .unidade-card {
    min-width: 0;
  }
  
  /* Reduzir tamanho dos valores monetários */
  .lg\:grid-cols-4 .unidade-card button[title*="oportunidades"] span[class*="text-[9px]"],
  .lg\:grid-cols-4 .unidade-card button[title*="oportunidades"] span[class*="text-[10px]"] {
    font-size: 7px !important;
    line-height: 1.2;
  }
  
  /* Reduzir padding dos botões */
  .lg\:grid-cols-4 .unidade-card button[title*="oportunidades"] {
    padding: 0.125rem !important;
    gap: 0.125rem !important;
  }
  
  /* Reduzir gap entre botões */
  .lg\:grid-cols-4 .unidade-card .flex.items-center.justify-between {
    gap: 0.25rem !important;
    padding: 0.375rem 0.5rem !important;
  }
  
  /* Labels menores (Abertas, Ganhas, Perdidas) */
  .lg\:grid-cols-4 .unidade-card button[title*="oportunidades"] span[class*="text-xs"] {
    font-size: 9px !important;
  }
  
  /* Ícones menores */
  .lg\:grid-cols-4 .unidade-card button[title*="oportunidades"] svg {
    width: 0.75rem !important;
    height: 0.75rem !important;
  }
  
  /* Títulos dos cards de unidade */
  .lg\:grid-cols-4 .unidade-card span[class*="text-lg"],
  .lg\:grid-cols-4 .unidade-card .font-black.uppercase {
    font-size: 0.8rem !important;
    line-height: 1.2 !important;
  }
  
  /* ===== CARDS DE ESTATÍSTICAS (6 POR LINHA) ===== */
  .lg\:grid-cols-6 > div {
    min-width: 0;
  }
  
  /* Reduzir padding dos cards */
  .lg\:grid-cols-6 .bg-gradient-to-br {
    padding: 0.75rem !important;
  }
  
  /* Títulos dos cards estatísticos */
  .lg\:grid-cols-6 p[class*="text-xs"],
  .lg\:grid-cols-6 span[class*="text-xs"] {
    font-size: 9px !important;
  }
  
  /* Valores principais dos cards */
  .lg\:grid-cols-6 p[class*="text-3xl"] {
    font-size: 1.5rem !important;
    line-height: 1.2 !important;
  }
  
  /* Valores secundários */
  .lg\:grid-cols-6 p[class*="text-sm"],
  .lg\:grid-cols-6 span[class*="text-sm"] {
    font-size: 10px !important;
  }
  
  /* Ícones dos cards estatísticos */
  .lg\:grid-cols-6 svg {
    width: 1rem !important;
    height: 1rem !important;
  }
  
  /* ===== BARRA DE PROGRESSO META ===== */
  .min-h-screen .bg-gradient-to-r[class*="from-blue"] {
    padding: 0.5rem 1rem !important;
    gap: 0.75rem !important;
  }
  
  .min-h-screen .bg-gradient-to-r[class*="from-blue"] h3 {
    font-size: 0.875rem !important;
  }
  
  .min-h-screen .bg-gradient-to-r[class*="from-blue"] p[class*="text-"] {
    font-size: 10px !important;
  }
  
  .min-h-screen .bg-gradient-to-r[class*="from-blue"] .h-6 {
    height: 1.25rem !important;
  }
  
  /* ===== GRÁFICOS ===== */
  .lg\:grid-cols-2 .bg-white h3 {
    font-size: 0.8rem !important;
  }
  
  .lg\:grid-cols-2 .bg-white p {
    font-size: 10px !important;
  }
  
  /* ===== FILTROS INLINE ===== */
  .min-h-screen > div > div > div:first-child button,
  .min-h-screen > div > div > div:first-child select {
    font-size: 11px !important;
    padding: 0.375rem 0.5rem !important;
  }
  
  .min-h-screen > div > div > div:first-child label {
    font-size: 10px !important;
  }
  
  /* ===== ESPAÇAMENTOS GERAIS ===== */
  .min-h-screen .gap-4 {
    gap: 0.75rem !important;
  }
  
  .min-h-screen .mb-4 {
    margin-bottom: 0.75rem !important;
  }
  
  .min-h-screen .mb-6 {
    margin-bottom: 1rem !important;
  }
  
  /* ===== PAINEL CONTAINER ===== */
  .min-h-screen > div > div {
    padding: 1rem !important;
  }
  
  /* ===== TABS E BADGES ===== */
  .bg-blue-50,
  .bg-green-50,
  .bg-red-50,
  .bg-purple-50,
  .bg-yellow-50 {
    padding: 0.25rem 0.5rem !important;
    font-size: 9px !important;
  }
  
  /* ===== TÍTULOS DE SEÇÃO ===== */
  .text-gray-900.font-bold.text-sm.uppercase {
    font-size: 11px !important;
  }
  
  /* ===== TOOLTIPS E LABELS ===== */
  .text-gray-500 {
    font-size: 9px !important;
  }
  
  /* ===== BOTÕES MENORES ===== */
  button[class*="text-xs"] {
    font-size: 9px !important;
    padding: 0.25rem 0.5rem !important;
  }
  
  /* ===== CARDS COM GRADIENTE (ESTATÍSTICAS) ===== */
  .rounded-2xl.bg-gradient-to-br {
    border-radius: 1rem !important;
  }
  
  .rounded-2xl.bg-gradient-to-br .space-y-1 {
    gap: 0.25rem !important;
  }
  
  /* ===== RESPONSIVIDADE DE GRÁFICOS ===== */
  .recharts-wrapper {
    font-size: 10px !important;
  }
  
  .recharts-cartesian-axis-tick text {
    font-size: 9px !important;
  }
  
  .recharts-label {
    font-size: 9px !important;
  }
  
  /* ===== AJUSTES PARA CARDS DE UNIDADE (META, ATINGIDO, ETC) ===== */
  .lg\:grid-cols-4 .unidade-card .flex.items-center.justify-between.gap-2 {
    padding-top: 0.5rem !important;
    margin-top: 0.5rem !important;
  }
  
  .lg\:grid-cols-4 .unidade-card .border-t {
    margin-top: 0.5rem !important;
    padding-top: 0.5rem !important;
  }
  
  .lg\:grid-cols-4 .unidade-card .space-y-2 {
    gap: 0.375rem !important;
  }
  
  /* ===== PROGRESS BAR HEIGHT ===== */
  .lg\:grid-cols-4 .unidade-card .h-3 {
    height: 0.625rem !important;
  }
  
  /* ===== BADGE POSIÇÃO (TOP 3) ===== */
  .lg\:grid-cols-4 .unidade-card .w-8.h-8 {
    width: 1.75rem !important;
    height: 1.75rem !important;
    font-size: 11px !important;
  }
  
  /* ===== BOTÃO EXPORTAR EXCEL ===== */
  .lg\:grid-cols-4 .unidade-card button[title*="Exportar"] {
    width: 1.75rem !important;
    height: 1.75rem !important;
  }
  
  .lg\:grid-cols-4 .unidade-card button[title*="Exportar"] svg {
    width: 0.875rem !important;
    height: 0.875rem !important;
  }
  
  /* ===== TEXTOS META/ATINGIDO ===== */
  .lg\:grid-cols-4 .unidade-card .text-xs.opacity-90 {
    font-size: 9px !important;
  }
  
  .lg\:grid-cols-4 .unidade-card .text-sm.font-bold {
    font-size: 11px !important;
  }
  
  /* ===== PERCENTUAL E STATUS ===== */
  .lg\:grid-cols-4 .unidade-card .text-\[10px\] {
    font-size: 8px !important;
  }
  
  .lg\:grid-cols-4 .unidade-card .px-2.py-0\.5 {
    padding: 0.125rem 0.375rem !important;
  }
  
  /* ===== HEADER DOS CARDS (MB-3) ===== */
  .lg\:grid-cols-4 .unidade-card .mb-3 {
    margin-bottom: 0.5rem !important;
  }
  
  /* ===== SPACE-Y-3 ===== */
  .lg\:grid-cols-4 .unidade-card .space-y-3 > * + * {
    margin-top: 0.5rem !important;
  }
  
  /* ===== AJUSTE FINAL DO PADDING DO CARD ===== */
  .lg\:grid-cols-4 .unidade-card > div {
    padding: 0.75rem !important;
  }
  
  /* ===== CARDS ESTATÍSTICOS - AJUSTES FINOS ===== */
  /* Cards de hoje, abertas, ganhas, etc */
  .grid.grid-cols-1.md\:grid-cols-3.lg\:grid-cols-6 .rounded-2xl {
    min-width: 0;
  }
  
  .grid.grid-cols-1.md\:grid-cols-3.lg\:grid-cols-6 .space-y-1 {
    gap: 0.25rem !important;
  }
  
  .grid.grid-cols-1.md\:grid-cols-3.lg\:grid-cols-6 .space-y-1 > * + * {
    margin-top: 0.25rem !important;
  }
  
  /* ===== SEPARADORES ===== */
  .grid.grid-cols-1.md\:grid-cols-3.lg\:grid-cols-6 hr {
    margin: 0.375rem 0 !important;
  }
  
  /* ===== TEXTOS "OPS" E VALORES PEQUENOS ===== */
  .grid.grid-cols-1.md\:grid-cols-3.lg\:grid-cols-6 .text-2xl {
    font-size: 1.25rem !important;
  }
  
  .grid.grid-cols-1.md\:grid-cols-3.lg\:grid-cols-6 .text-xl {
    font-size: 1rem !important;
  }
  
  /* ===== HEADER/FOOTER DO PAINEL ===== */
  .min-h-screen > nav,
  .min-h-screen > footer {
    font-size: 11px !important;
  }
  
  .min-h-screen > nav h1,
  .min-h-screen > nav h2 {
    font-size: 1.25rem !important;
  }
  
  /* ===== CONTAINER PRINCIPAL DO PAINEL ===== */
  .min-h-screen .w-full.overflow-y-auto {
    padding: 0.75rem !important;
  }
  
  /* ===== AJUSTES PARA SCROLLBARS ===== */
  .scrollbar-gutter-stable::-webkit-scrollbar {
    height: 8px !important;
    width: 8px !important;
  }
  
  /* ===== GARANTIR QUE MODAIS NÃO SEJAM AFETADOS ===== */
  [role="dialog"] *,
  .fixed.z-50 * {
    font-size: revert !important;
    padding: revert !important;
  }
  
  /* ===== AJUSTES PARA TABS (SE HOUVER) ===== */
  [role="tablist"] button {
    font-size: 10px !important;
    padding: 0.375rem 0.75rem !important;
  }
  
  /* ===== LOADING STATES ===== */
  .animate-pulse {
    min-height: 3rem !important;
  }
  
  /* ===== AJUSTES FINAIS PARA PROPORÇÃO PERFEITA ===== */
  /* Reduzir todos os gaps do painel principal */
  .min-h-screen .space-y-4 > * + * {
    margin-top: 0.75rem !important;
  }
  
  .min-h-screen .space-y-3 > * + * {
    margin-top: 0.5rem !important;
  }
  
  .min-h-screen .space-y-2 > * + * {
    margin-top: 0.375rem !important;
  }
  
  /* ===== CARDS DE GRÁFICOS - PADDING INTERNO ===== */
  .grid.grid-cols-1.lg\:grid-cols-2 .bg-white .p-3 {
    padding: 0.625rem !important;
  }
  
  /* ===== TÍTULOS H3 DOS GRÁFICOS ===== */
  .grid.grid-cols-1.lg\:grid-cols-2 h3 {
    font-size: 0.75rem !important;
    margin-bottom: 0.375rem !important;
  }
  
  /* ===== ALTURA DOS GRÁFICOS ===== */
  .recharts-responsive-container {
    min-height: 180px !important;
  }
}

/* Grid de 5 colunas - ainda mais compacto */
@media (min-width: 1536px) {
  .xl\:grid-cols-5 .unidade-card button[title*="oportunidades"] span[class*="text-[9px]"],
  .xl\:grid-cols-5 .unidade-card button[title*="oportunidades"] span[class*="text-[10px]"] {
    font-size: 6px !important;
  }
  
  .xl\:grid-cols-5 .unidade-card .flex.items-center.justify-between {
    gap: 0.125rem !important;
    padding: 0.25rem 0.375rem !important;
  }
}

/* Forçar truncamento em valores monetários com título */
.unidade-card span[title*="R$"] {
  display: inline-block;
  max-width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}